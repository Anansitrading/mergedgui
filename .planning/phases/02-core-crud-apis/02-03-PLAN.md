---
phase: 02-core-crud-apis
plan: 03
type: execute
wave: 1
wave_type: ASYNC
depends_on: []
files_modified:
  - server/app/routers/habits.py
  - server/app/services/habits.py
  - server/tests/test_habits.py
autonomous: true
difficulty: medium
---

<objective>
Implement Habits CRUD endpoints: list, create, get, update, delete, toggle, stats, cron validation.
11 endpoints for scheduled skill execution management.
</objective>

<context>
@server/app/models/habit.py
@server/app/middleware/auth.py
@database/002_skills_tables.sql
</context>

<tasks>
<task type="auto">
  <name>Create habits service, router, and tests</name>
  <files>
    server/app/services/habits.py
    server/app/routers/habits.py
    server/app/main.py
    server/tests/test_habits.py
  </files>
  <action>
    Router endpoints:
    - GET /habits (paginated, filterable by skill_id/active)
    - POST /habits
    - GET /habits/{id}
    - PATCH /habits/{id}
    - DELETE /habits/{id}
    - POST /habits/{id}/toggle (activate/deactivate)
    - GET /habits/{id}/stats
    - POST /habits/validate-cron (validate cron expression, return next runs)
    Wire into main.py. All use require_auth.
  </action>
  <done>Habits CRUD endpoints with cron validation</done>
</task>
</tasks>

<output>
After completion, create `.planning/phases/02-core-crud-apis/02-03-SUMMARY.md`
</output>
